source <(kubectl completion zsh)


# alias k=kubectl
function k() {
  [[ -p /dev/stdin ]] && {
    echo $(cat -) | kubectl "$@"
    rc=$?
    update_badge
    return "$rc"
  }

  kubectl "$@"
  rc=$?
  update_badge
  return "$rc"
}

function kcl() { k config get-contexts; }

function kset() { k config use-context "$1"; }

# kubectl config set-context --current --namespace=

complete -o default -F __start_kubectl k
